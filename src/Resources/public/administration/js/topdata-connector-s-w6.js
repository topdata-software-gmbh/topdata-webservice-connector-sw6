(function(){"use strict";var t={};t.p="bundles/topdataconnectorsw6/",window?.__sw__?.assetPath&&(t.p=window.__sw__.assetPath+"/bundles/topdataconnectorsw6/"),function(){let{Mixin:t}=Shopware;Shopware.Component.register("topdata-connector-info",{template:"{% block topdata_connector %}\n    <sw-page>\n        <template slot=\"smart-bar-header\">\n            <h2>\n                {{ $tc('topdata-connector.header') }}\n            </h2>\n        </template>\n\n        <template slot=\"smart-bar-actions\">\n        </template>\n\n        <template slot=\"content\">\n            <sw-card-view>\n                <sw-loader v-if=\"isLoading\">\n                </sw-loader>\n                <sw-card v-if='pluginsEnabled.TopdataConnectorSW6'>\n                    <h3>{{ $tc('topdata-connector.pluginName') }}</h3>\n                    <sw-button :routerLink=\"{ name: 'sw.extension.config', params: { namespace: 'TopdataConnectorSW6' }}\">\n                        {{ $tc('topdata-connector.settings') }}\n                    </sw-button>\n                    <sw-button-process\n                        :isLoading=\"isLoading\"\n                        :processSuccess=\"processSuccess\"\n                        variant=\"primary\"\n                        @process-finish=\"testFinish\"\n                        @click=\"onClickTest\">\n                        {{ $tc('topdata-connector.test') }}\n                    </sw-button-process>\n                    <sw-button-process\n                        :isLoading=\"isLoading\"\n                        :processSuccess=\"demoSuccess\"\n                        variant=\"primary\"\n                        @process-finish=\"demoFinish\"\n                        @click=\"onClickDemo\">\n                        {{ $tc('topdata-connector.installDemoData') }}\n                    </sw-button-process>\n                </sw-card>\n                    \n                <sw-card v-if='pluginsEnabled.TopdataTopFinderProSW6'>\n                    <h3>{{ $tc('topdata-connector.finder.pluginName') }}</h3>\n                    <sw-button :routerLink=\"{ name: 'sw.extension.config', params: { namespace: 'TopdataTopFinderProSW6' }}\">\n                        {{ $tc('topdata-connector.finder.settings') }}\n                    </sw-button>\n                    <div>\n                        <sw-multi-select\n                            :label=\"$tc('topdata-connector.finder.primaryBrands')\"\n                            :options=\"availableBrands\"\n                            :isLoading=\"brandsLoading\"\n                            valueProperty=\"value\"\n                            labelProperty=\"label\"\n                            @change=\"onChangeBrandsPrimary\"\n                            :value=\"brandsPrimary\">\n                        </sw-multi-select>\n                        <sw-button-process\n                            :isLoading=\"brandsLoading\"\n                            variant=\"primary\"\n                            @click=\"onSavePrimaryBrands\">\n                            {{ $tc('topdata-connector.finder.savePrimaryBrands') }}\n                        </sw-button-process>\n                    </div>\n                </sw-card>\n                        \n                <sw-card v-if='pluginsEnabled.TopdataTopFeedSW6'>\n                    <h3>{{ $tc('topdata-connector.feed.pluginName') }}</h3>\n                    <sw-button :routerLink=\"{ name: 'sw.extension.config', params: { namespace: 'TopdataTopFeedSW6' }}\">\n                        {{ $tc('topdata-connector.feed.settings') }}\n                    </sw-button>\n                </sw-card>\n                    \n                <sw-card v-if='pluginsEnabled.TopdataColors'>\n                    <h3>{{ $tc('topdata-connector.colors.pluginName') }}</h3>\n                    <sw-button :routerLink=\"{ name: 'sw.extension.config', params: { namespace: 'TopdataColors' }}\">\n                        {{ $tc('topdata-connector.colors.settings') }}\n                    </sw-button>\n                </sw-card>\n                    \n                <sw-card v-if='pluginsEnabled.TopdataCompareProducts'>\n                    <h3>{{ $tc('topdata-connector.compareProducts.pluginName') }}</h3>\n                    <sw-button :routerLink=\"{ name: 'sw.extension.config', params: { namespace: 'TopdataCompareProducts' }}\">\n                        {{ $tc('topdata-connector.compareProducts.settings') }}\n                    </sw-button>\n                </sw-card>\n                    \n                <sw-card v-if='pluginsEnabled.TopdataProductMenu'>\n                    <h3>{{ $tc('topdata-connector.productMenu.pluginName') }}</h3>\n                    <sw-button :routerLink=\"{ name: 'sw.extension.config', params: { namespace: 'TopdataProductMenu' }}\">\n                        {{ $tc('topdata-connector.productMenu.settings') }}\n                    </sw-button>\n                </sw-card>\n                    \n                <sw-card v-if='pluginsEnabled.TopdataProductQuickView'>\n                    <h3>{{ $tc('topdata-connector.productQuickView.pluginName') }}</h3>\n                    <sw-button :routerLink=\"{ name: 'sw.extension.config', params: { namespace: 'TopdataProductQuickView' }}\">\n                        {{ $tc('topdata-connector.productQuickView.settings') }}\n                    </sw-button>\n                </sw-card>\n                    \n                <sw-card v-if='pluginsEnabled.TopdataCategoryFilterSW6'>\n                    <h3>{{ $tc('topdata-connector.categoryFilter.pluginName') }}</h3>\n                    <sw-button :routerLink=\"{ name: 'sw.extension.config', params: { namespace: 'TopdataCategoryFilterSW6' }}\">\n                        {{ $tc('topdata-connector.categoryFilter.settings') }}\n                    </sw-button>\n                </sw-card>\n            </sw-card-view>\n        </template>\n    </sw-page>\n{% endblock %}\n",metaInfo(){return{title:this.$createTitle()}},mixins:[t.getByName("notification")],inject:["systemConfigApiService","TopdataApiCredentialsService"],data(){return{isLoading:!1,processSuccess:!1,demoSuccess:!1,config:{},pluginsEnabled:{TopdataConnectorSW6:!1,TopdataTopFinderProSW6:!1,TopdataTopFeedSW6:!1,TopdataColors:!1},availableBrands:[],brandsLoading:!0,brandsPrimary:[]}},computed:{},created(){this.onGetActivePlugins(),this.loadBrands()},methods:{onGetActivePlugins(){var t=this;this.TopdataApiCredentialsService.getActivePlugins().then(e=>{for(let[n,a]of Object.entries(e.activePlugins))t.pluginsEnabled[a]=!0}).catch(t=>{console.log(t)})},onChangeBrandsPrimary(t){this.brandsPrimary=t},loadBrands(){this.brandsLoading=!0,this.TopdataApiCredentialsService.loadBrands().then(t=>{if(t.brandsCount>0)for(let[e,n]of Object.entries(t.brands))this.availableBrands.push({value:e,label:n});if(t.primaryCount>0)for(let[e,n]of Object.entries(t.primary))this.brandsPrimary.push(e);this.brandsLoading=!1}).catch(t=>{this.brandsLoading=!1})},onSavePrimaryBrands(){this.brandsLoading=!0,this.TopdataApiCredentialsService.savePrimaryBrands(this.brandsPrimary).then(t=>{this.brandsLoading=!1}).catch(t=>{this.brandsLoading=!1})},onClickTest(){this.isLoading=!0,this.TopdataApiCredentialsService.testApiCredentials().then(t=>{if("yes"===t.credentialsValid)this.createNotificationSuccess({title:"Test Success",message:"We connected to the server!"}),this.processSuccess=!0;else{let e=t.additionalData?t.additionalData:"Something went wrong...";this.createNotificationError({title:"Connection Test Error",message:e})}this.isLoading=!1}).catch(t=>{this.createNotificationError({title:"Test Error",message:"something went wrong"}),this.isLoading=!1,this.processSuccess=!1})},onClickDemo(){this.isLoading=!0,this.TopdataApiCredentialsService.installDemoData().then(t=>{if(t.success){let e=t.additionalInfo?t.additionalInfo:"Everything ok...";this.createNotificationSuccess({title:"Install success",message:e}),this.demoSuccess=!0}else{let e=t.additionalInfo?t.additionalInfo:"Something went wrong...";this.createNotificationError({title:"Demo data failed",message:e})}this.isLoading=!1}).catch(t=>{this.createNotificationError({title:"Test Error",message:"something went wrong"}),this.isLoading=!1,this.demoSuccess=!1})},demoFinish(){this.demoSuccess=!1},testFinish(){this.processSuccess=!1}}});var e=JSON.parse('{"topdata-connector":{"header":"TopData Plugins","test":"Test","mainMenuItemGeneral":"TopData Plugins","descriptionTextModule":"TopData TopCONNECTOR Info","pluginName":"TopData TopCONNECTOR\\n","settings":"TopCONNECTOR Einstellungen","finder":{"pluginName":"TopData TopFINDER","settings":"TopFINDER Einstellungen","primaryBrands":"Top Marken","savePrimaryBrands":"Speichern"},"feed":{"pluginName":"TopData TopFEED","settings":"TopFEED Einstellungen"},"colors":{"pluginName":"TopData Colors","settings":"Colors Einstellungen"},"compareProducts":{"pluginName":"TopData Compare Products","settings":"Einstellungen"},"productMenu":{"pluginName":"TopData Product Menu","settings":"Einstellungen"},"productQuickView":{"pluginName":"TopData Product Quick View","settings":"Einstellungen"},"categoryFilter":{"pluginName":"TopData Kategoriefilter","settings":"Einstellungen"}}}'),n=JSON.parse('{"topdata-connector":{"header":"TopData Plugins","test":"Test","installDemoData":"Install demo data","testDisclamer":"Save changes before testing API connection","demoDisclamer":"Install demo products, than you can use console command for import, use default OEM/EAN mapping","testSuccessHeader":"Success!","testSuccessText":"We connected to the server!","testFailHeader":"Failed!","testFailText":"Something went wrong...","mainMenuItemGeneral":"TopData Plugins","descriptionTextModule":"TopData TopCONNECTOR info","pluginName":"TopData TopCONNECTOR","settings":"TopCONNECTOR settings","finder":{"pluginName":"TopData TopFINDER","settings":"TopFINDER settings","primaryBrands":"Brands display first","savePrimaryBrands":"Save"},"feed":{"pluginName":"TopData TopFEED","settings":"TopFEED settings"},"colors":{"pluginName":"TopData Colors","settings":"Colors settings"},"compareProducts":{"pluginName":"TopData Compare Products","settings":"Settings"},"productMenu":{"pluginName":"TopData Product Menu","settings":"Settings"},"productQuickView":{"pluginName":"TopData Product Quick View","settings":"Settings"},"categoryFilter":{"pluginName":"TopData Category Filter","settings":"Settings"}}}');let{Module:a}=Shopware;a.register("topdata-connector",{type:"plugin",name:"Topdata Connector",title:"topdata-connector.mainMenuItemGeneral",description:"topdata-connector.descriptionTextModule",color:"#9AA8B5",icon:"default-action-settings",snippets:{"de-DE":e,"en-GB":n},routes:{info:{component:"topdata-connector-info",path:"info",meta:{parentPath:"sw.settings.index"}}}}),Shopware.Component.override("sw-settings-index",{template:"{% block sw_settings_content_tab_plugins %}\n    {% parent %}\n\n    <sw-tabs-item \n        :route=\"{ name: 'topdata.connector.info' }\" \n        title=\"{{ $tc('topdata-connector.header') }}\">\n        {{ $tc('topdata-connector.header') }}\n    </sw-tabs-item>\n{% endblock %}"});let s=Shopware.Classes.ApiService;var o=class extends s{constructor(t,e,n="topdata"){super(t,e,n)}loadBrands(){let t=this.getBasicHeaders();return this.httpClient.get(`${this.getApiBasePath()}/load-brands`,{params:{},headers:t}).then(t=>s.handleResponse(t))}savePrimaryBrands(t){let e=this.getBasicHeaders();return this.httpClient.post(`${this.getApiBasePath()}/save-primary-brands`,{primaryBrands:t},{params:{},headers:e}).then(t=>s.handleResponse(t))}testApiCredentials(){let t=this.getBasicHeaders();return this.httpClient.get(`${this.getApiBasePath()}/connector-test`,{params:{},headers:t}).then(t=>s.handleResponse(t))}getActivePlugins(){let t=this.getBasicHeaders();return this.httpClient.get(`${this.getApiBasePath()}/connector-plugins`,{params:{},headers:t}).then(t=>s.handleResponse(t))}installDemoData(){let t=this.getBasicHeaders();return this.httpClient.get(`${this.getApiBasePath()}/connector-install-demodata`,{params:{},headers:t}).then(t=>s.handleResponse(t))}};let{Mixin:i}=Shopware;Shopware.Component.register("topdata-connector-test-connection",{template:'<div>\n    <div>{{ $tc(\'topdata-connector.testDisclamer\') }}</div>\n    <sw-button-process\n        :isLoading="isLoading"\n        :processSuccess="processSuccess"\n        variant="primary"\n        @process-finish="testFinish"\n        @click="onClickTest">\n        {{ $tc(\'topdata-connector.test\') }}\n    </sw-button-process>\n    <div>{{ $tc(\'topdata-connector.demoDisclamer\') }}</div>\n    <sw-button-process\n        :isLoading="isLoading"\n        :processSuccess="demoSuccess"\n        variant="primary"\n        @process-finish="demoFinish"\n        @click="onClickDemo">\n        {{ $tc(\'topdata-connector.installDemoData\') }}\n    </sw-button-process>\n</div>',mixins:[i.getByName("notification")],inject:["systemConfigApiService","TopdataApiCredentialsService"],data(){return{isLoading:!1,processSuccess:!1,demoSuccess:!1}},methods:{onClickTest(){this.isLoading=!0,this.TopdataApiCredentialsService.testApiCredentials().then(t=>{if("yes"===t.credentialsValid){let t=this.$tc("topdata-connector.testSuccessHeader"),e=this.$tc("topdata-connector.testSuccessText");this.createNotificationSuccess({title:t,message:e}),this.processSuccess=!0}else{let e=this.$tc("topdata-connector.testFailHeader"),n=t.additionalData?t.additionalData:this.$tc("topdata-connector.testFailText");this.createNotificationError({title:e,message:n})}this.isLoading=!1}).catch(t=>{let e=this.$tc("topdata-connector.testFailHeader"),n=this.$tc("topdata-connector.testFailText");this.createNotificationError({title:e,message:n}),this.isLoading=!1,this.processSuccess=!1})},testFinish(){this.processSuccess=!1},onClickDemo(){this.isLoading=!0,this.TopdataApiCredentialsService.installDemoData().then(t=>{if(t.success){let e=t.additionalInfo?t.additionalInfo:"Everything ok...";this.createNotificationSuccess({title:"Install success",message:e}),this.demoSuccess=!0}else{let e=t.additionalInfo?t.additionalInfo:"Something went wrong...";this.createNotificationError({title:"Demo data failed",message:e})}this.isLoading=!1}).catch(t=>{this.createNotificationError({title:"Test Error",message:"something went wrong"}),this.isLoading=!1,this.demoSuccess=!1})},demoFinish(){this.demoSuccess=!1}}});let{Application:r}=Shopware;r.addServiceProvider("TopdataApiCredentialsService",t=>new o(r.getContainer("init").httpClient,t.loginService))}()})();